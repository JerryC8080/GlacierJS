<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>GlacierJS API Doc</title><meta name="description" content="Documentation for GlacierJS API Doc"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">GlacierJS API Doc</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1> GlacierJS API Doc</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#introduction" id="introduction" style="color: inherit; text-decoration: none;">
  <h1>Introduction</h1>
</a>
<p align="center">
  <a href="https://jerryc8080.github.io/GlacierJS/">
      <img width="320" src="https://bluesun-1252625244.cos.ap-guangzhou.myqcloud.com/jerryc/20220227085816.png?imageView2/2/w/320">
  </a>
</p>

<h3 align="center">
  <p><a href="https://jerryc8080.github.io/GlacierJS/#/contents/zh-cn/">üìñ üá®üá≥ ‰∏≠ÊñáÊñáÊ°£</a></p>
  <p><a href="https://jerryc8080.github.io/GlacierJS/">üìñ üá¨üáß Document for English</a></p>
</h3>

<p align="center">
  A framework dedicated to making it easier for you to build enterprise-grade PWA applications.
</p>



<a href="#features" id="features" style="color: inherit; text-decoration: none;">
  <h2>Features</h2>
</a>
<ul>
<li>üß≥  Out of the box</li>
<li>üóΩ  Multi-dimensional plug-in system based on onion model, programming is more decoupled and free</li>
<li>üöÄ  SW security registration and uninstallation</li>
<li>üé°  Static resource caching</li>
<li>üé¢  Resource pre-cache</li>
<li>üé†  Remote control</li>
<li>‚õ≤Ô∏è  Data metrics collection</li>
</ul>

<a href="#motivation" id="motivation" style="color: inherit; text-decoration: none;">
  <h2>Motivation</h2>
</a>
<p>Due to the complexity of Service Worker technology, we need to know a lot of related knowledge in the development of PWA applications.<br><a href="https://developers.google.com/web/tools/workbox">Google Workbox</a> provides a set of convenient APIs to simplify common SW operations such as SW registration and installation, resource caching, etc., but its positioning is: <strong>&quot;Library&quot;</strong>.    </p>
<p>When there are more and more SW program codes, it will cause the code to be bloated, the management is chaotic, and the reuse is difficult.<br>At the same time, some common PWA implementations, such as: remote control, process communication, data reporting, etc., hope to achieve on-demand pluggable reuse.<br>We need : <strong>&quot;Framework&quot;</strong>.</p>
<p>Can we use Workbox as the underlying technology and build a higher-level abstraction framework on top of it to solve these problems?<br>So, I built a basic suite: <strong>GlacierJS</strong>.<br>It is based on a core &quot;multi-dimensional onion plug-in system&quot; and multiple plug-ins, allowing you to build an enterprise-level PWA application faster.</p>
<blockquote>
<p>Glacier is a tribute to the former <a href="https://github.com/lavas-project/lavas">Lavas</a></p>
</blockquote>

<a href="#simplest-example" id="simplest-example" style="color: inherit; text-decoration: none;">
  <h2>Simplest example</h2>
</a>
<p>In Main thread</p>
<pre><code class="language-html"><span class="hl-0">&lt;</span><span class="hl-1">script</span><span class="hl-2"> </span><span class="hl-3">src</span><span class="hl-2">=</span><span class="hl-4">&quot;//cdn.jsdelivr.net/npm/@glacierjs/core/dist/index.min.js&quot;</span><span class="hl-2"> </span><span class="hl-0">&gt;&lt;/</span><span class="hl-1">script</span><span class="hl-0">&gt;</span><br/><span class="hl-0">&lt;</span><span class="hl-1">script</span><span class="hl-2"> </span><span class="hl-3">src</span><span class="hl-2">=</span><span class="hl-4">&quot;//cdn.jsdelivr.net/npm/@glacierjs/window/dist/index.min.js&quot;</span><span class="hl-0">&gt;&lt;/</span><span class="hl-1">script</span><span class="hl-0">&gt;</span><br/><br/><span class="hl-0">&lt;</span><span class="hl-1">script</span><span class="hl-0">&gt;</span><br/><span class="hl-2">    </span><span class="hl-5">const</span><span class="hl-2"> { </span><span class="hl-6">GlacierWindow</span><span class="hl-2"> } </span><span class="hl-7">=</span><span class="hl-2"> </span><span class="hl-8">window</span><span class="hl-2">[</span><span class="hl-9">&#39;@glacierjs/window&#39;</span><span class="hl-2">];</span><br/><span class="hl-2">    </span><span class="hl-5">const</span><span class="hl-2"> </span><span class="hl-6">glacier</span><span class="hl-2"> </span><span class="hl-7">=</span><span class="hl-2"> </span><span class="hl-5">new</span><span class="hl-2"> </span><span class="hl-10">GlacierWindow</span><span class="hl-2">(</span><span class="hl-9">&#39;./service-worker.js&#39;</span><span class="hl-2">);</span><br/><br/><span class="hl-2">    </span><span class="hl-8">glacier</span><span class="hl-2">.</span><span class="hl-10">register</span><span class="hl-2">().</span><span class="hl-10">then</span><span class="hl-2">((</span><span class="hl-8">registration</span><span class="hl-2">) </span><span class="hl-5">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">      </span><span class="hl-8">console</span><span class="hl-2">.</span><span class="hl-10">log</span><span class="hl-2">(</span><span class="hl-9">&#39;Register service-worker succeed&#39;</span><span class="hl-2">, </span><span class="hl-8">registration</span><span class="hl-2">);</span><br/><span class="hl-2">    }).</span><span class="hl-10">catch</span><span class="hl-2">((</span><span class="hl-8">error</span><span class="hl-2">) </span><span class="hl-5">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">      </span><span class="hl-8">console</span><span class="hl-2">.</span><span class="hl-10">error</span><span class="hl-2">(</span><span class="hl-9">&#39;Register service-worker failed&#39;</span><span class="hl-2">, </span><span class="hl-8">error</span><span class="hl-2">);</span><br/><span class="hl-2">    });</span><br/><span class="hl-0">&lt;/</span><span class="hl-1">script</span><span class="hl-0">&gt;</span>
</code></pre>
<p>In ServiceWorker thread</p>
<pre><code class="language-javascript"><span class="hl-10">importScripts</span><span class="hl-7">(</span><span class="hl-9">&quot;//cdn.jsdelivr.net/npm/@glacierjs/core/dist/index.js&quot;</span><span class="hl-7">);</span><br/><span class="hl-10">importScripts</span><span class="hl-7">(</span><span class="hl-9">&#39;//cdn.jsdelivr.net/npm/@glacierjs/sw/dist/index.js&#39;</span><span class="hl-7">);</span><br/><br/><span class="hl-5">const</span><span class="hl-7"> { </span><span class="hl-6">GlacierSW</span><span class="hl-7"> } = </span><span class="hl-8">self</span><span class="hl-7">[</span><span class="hl-9">&#39;@glacierjs/sw&#39;</span><span class="hl-7">];</span><br/><span class="hl-5">const</span><span class="hl-7"> </span><span class="hl-6">glacierSW</span><span class="hl-7"> = </span><span class="hl-5">new</span><span class="hl-7"> </span><span class="hl-10">GlacierSW</span><span class="hl-7">();</span><br/><span class="hl-8">glacierSW</span><span class="hl-7">.</span><span class="hl-10">listen</span><span class="hl-7">();</span>
</code></pre>

<a href="#design-overview" id="design-overview" style="color: inherit; text-decoration: none;">
  <h2>Design overview</h2>
</a>

<a href="#architecture" id="architecture" style="color: inherit; text-decoration: none;">
  <h3>Architecture</h3>
</a>
<p align="center">
    <img alt="logo" width="700" src="https://bluesun-1252625244.cos.ap-guangzhou.myqcloud.com/jerryc/20220227172033.png">
</p>

<p>It consists of several parts:</p>
<ul>
<li><p><strong>Core</strong></p>
<ul>
<li><input checked="" disabled="" type="checkbox"> <code>@glacierjs/core</code>: As the core of Glacier, it implements functions such as plug-in system, log system, etc.Generally, you will not use this module directly.</li>
<li><input checked="" disabled="" type="checkbox"> <code>@glacierjs/sw</code>: The code running in the SW process encapsulates the SW life cycle and provides a simple programming method.</li>
<li><input checked="" disabled="" type="checkbox"> <code>@glacierjs/window</code>: The code running in the main process, in addition to supporting plug-in programming, is also responsible for managing the registration and uninstallation of SW.</li>
</ul>
</li>
<li><p><strong>Plugins</strong></p>
<ul>
<li><input checked="" disabled="" type="checkbox"> <code>@glacierjs/plugin-precache</code>: Implement static resource pre-cache function.</li>
<li><input checked="" disabled="" type="checkbox"> <code>@glacierjs/plugin-reporter</code>: Realize basic data reporting function.</li>
<li><input checked="" disabled="" type="checkbox"> <code>@glacierjs/plugin-assets</code>: Implement static resource caching.</li>
<li><input checked="" disabled="" type="checkbox"> <code>@glacierjs/plugin-remote-controller</code>: Implement remote control function.</li>
</ul>
</li>
<li><p><strong>Related</strong></p>
<ul>
<li><input disabled="" type="checkbox"> @glacierjs/cli: Supports rapid creation of applications and plugins.</li>
<li><input disabled="" type="checkbox"> @glacierjs/webpack-plugin: support building static resource manifests.</li>
</ul>
</li>
</ul>

<a href="#multidimensional-onion-plugin-system" id="multidimensional-onion-plugin-system" style="color: inherit; text-decoration: none;">
  <h3>Multidimensional Onion Plugin System</h3>
</a>
<p>GlacierJS encapsulates traditional ServiceWorker lifecycle hooks to support plug-in.
The plug-in system implements an &quot;onion&quot; for each native lifecycle hook according to the onion model, so we call this system:</p>
<blockquote>
<p><strong>Multidimensional Onion Plugin System</strong></p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc8080/glacierjs@master/docs/assets/plugin-system.drawio.png" alt="GlacierJS Â§öÁª¥Ê¥ãËë±Êèí‰ª∂Á≥ªÁªü"></p>
<p>After encapsulating the traditional life cycle, we provide a more elegant life cycle hook function for each plugin</p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc8080/glacierjs@master/docs/assets/lifecycle.drawio.png" alt="GlacierJS ÁîüÂëΩÂë®ÊúüÂõæÁ§∫"></p>

<a href="#contact-amp-support" id="contact-amp-support" style="color: inherit; text-decoration: none;">
  <h1>Contact &amp; Support</h1>
</a>
<ul>
<li>Welcome to contact me via email: <a href="mailto:huangjerryc@gmail.com">huangjerryc@gmail.com</a></li>
<li>Welcome to submit bugs and other issues through  <a href="https://github.com/JerryC8080/glacierjs/issues">GitHub issue</a></li>
<li>Please give this project a like ‚≠êÔ∏è <a href="https://github.com/beautywe/beautywe">star on GitHub</a> !</li>
</ul>

<a href="#license" id="license" style="color: inherit; text-decoration: none;">
  <h1>License</h1>
</a>
<p>This project is licensed under the <a href="https://cdn.jsdelivr.net/gh/JerryC8080/glacierjs/LICENSE">MIT license</a>.</p>
<p>Copyright (c) JerryC Huang (<a href="mailto:huangjerryc@gmail.com">huangjerryc@gmail.com</a>)</p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Modules</a></li><li class=" tsd-kind-module"><a href="modules/_glacierjs_core.html">@glacierjs/core</a></li><li class=" tsd-kind-module"><a href="modules/_glacierjs_plugin_assets_cache.html">@glacierjs/plugin-<wbr/>assets-<wbr/>cache</a></li><li class=" tsd-kind-module"><a href="modules/_glacierjs_plugin_collector.html">@glacierjs/plugin-<wbr/>collector</a></li><li class=" tsd-kind-module"><a href="modules/_glacierjs_plugin_precache.html">@glacierjs/plugin-<wbr/>precache</a></li><li class=" tsd-kind-module"><a href="modules/_glacierjs_plugin_remote_controller.html">@glacierjs/plugin-<wbr/>remote-<wbr/>controller</a></li><li class=" tsd-kind-module"><a href="modules/_glacierjs_sw.html">@glacierjs/sw</a></li><li class=" tsd-kind-module"><a href="modules/_glacierjs_window.html">@glacierjs/window</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li><li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><span class="tsd-kind-icon">Type alias with type parameter</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li><li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>