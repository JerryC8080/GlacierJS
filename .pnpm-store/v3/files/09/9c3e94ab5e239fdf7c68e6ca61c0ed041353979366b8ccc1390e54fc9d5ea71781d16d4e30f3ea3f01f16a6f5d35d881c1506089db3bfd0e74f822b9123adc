"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.createVersionSpec = exports.getPref = exports.getPrefix = void 0;
const error_1 = __importDefault(require("@pnpm/error"));
const getPrefix = (alias, name) => alias !== name ? `npm:${name}@` : '';
exports.getPrefix = getPrefix;
function getPref(alias, name, version, opts) {
    const prefix = (0, exports.getPrefix)(alias, name);
    return `${prefix}${createVersionSpec(version, opts.pinnedVersion)}`;
}
exports.getPref = getPref;
function createVersionSpec(version, pinnedVersion) {
    switch (pinnedVersion ?? 'major') {
        case 'none':
            return '*';
        case 'major':
            return `^${version}`;
        case 'minor':
            return `~${version}`;
        case 'patch':
            return `${version}`;
        default:
            throw new error_1.default('BAD_PINNED_VERSION', `Cannot pin '${pinnedVersion ?? 'undefined'}'`);
    }
}
exports.createVersionSpec = createVersionSpec;
//# sourceMappingURL=getPref.js.map